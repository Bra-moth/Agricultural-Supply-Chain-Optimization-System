<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Agricultural Supply Chain Optimization Platform"
    />
    <meta
      name="keywords"
      content="agriculture, supply chain, farming, distribution"
    />
    <title>Agricultural SCM - {% block title %}Home{% endblock %}</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="icon"
      type="image/x-icon"
      href="{{ url_for('static', filename='images/favicon.ico') }}"
    />
    {% block head %}{% endblock %}
  </head>

  <body class="d-flex flex-column min-vh-100">
    <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
      <div class="container">
        <a class="navbar-brand" href="{{ url_for('index') }}">
          <img
            src="{{ url_for('static', filename='images/logo.png') }}"
            alt="Logo"
            height="40"
          />
          AgriSCM
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#mainNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainNav">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a
                class="nav-link {{ 'active' if request.endpoint == 'dashboard' }}"
                href="{{ url_for('dashboard') }}"
                >Dashboard</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link {{ 'active' if request.endpoint == 'orders' }}"
                href="{{ url_for('orders') }}"
                >Orders</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link {{ 'active' if request.endpoint == 'crop_inventory' }}"
                href="{{ url_for('crop_inventory') }}"
                >Crops</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link {{ 'active' if request.endpoint == 'market_prices' }}"
                href="{{ url_for('market_prices') }}"
                >Market</a
              >
            </li>
          </ul>
          <div class="d-flex align-items-center">
            {% if current_user %}
            <div class="dropdown">
              <a
                class="btn btn-outline-secondary dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                {{ current_user.username }}
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li>
                  <a class="dropdown-item" href="{{ url_for('dashboard') }}"
                    >Profile</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a
                    class="dropdown-item text-danger"
                    href="{{ url_for('logout') }}"
                    >Logout</a
                  >
                </li>
              </ul>
            </div>
            {% else %}
            <a class="btn btn-primary me-2" href="{{ url_for('login') }}"
              >Login</a
            >
            <a class="btn btn-outline-primary" href="{{ url_for('register') }}"
              >Register</a
            >
            {% endif %}
          </div>
        </div>
      </div>
    </nav>

    <main class="flex-grow-1">
      <div class="container my-4">
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %}
        <div class="flashes">
          {% for category, message in messages %}
          <div
            class="alert alert-{{ category }} alert-dismissible fade show"
            role="alert"
            aria-live="assertive"
            aria-atomic="true"
          >
            {{ message }}
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
              aria-label="Close"
            ></button>
          </div>
          {% endfor %}
        </div>
        {% endif %} {% endwith %} {% block content %}{% endblock %}
      </div>
    </main>

    <footer class="bg-dark text-white py-4 mt-auto">
      <div class="container">
        <div class="row">
          <div class="col-md-4 mb-3">
            <h5>About AgriSCM</h5>
            <p class="text-muted">
              Connecting farmers, distributors, and retailers for optimized
              agricultural supply chains.
            </p>
          </div>
          <div class="col-md-4 mb-3">
            <h5>Quick Links</h5>
            <ul class="list-unstyled">
              <li>
                <a href="{{ url_for('market_prices') }}" class="text-white"
                  >Market Prices</a
                >
              </li>
              <li>
                <a href="{{ url_for('register') }}" class="text-white"
                  >Become a Member</a
                >
              </li>
              <li><a href="#" class="text-white">Privacy Policy</a></li>
            </ul>
          </div>
          <div class="col-md-4 mb-3">
            <h5>Contact</h5>
            <ul class="list-unstyled">
              <li>Email: support@agriscm.com</li>
              <li>Phone: +1 (555) 123-4567</li>
            </ul>
          </div>
        </div>
        <div class="text-center pt-3 border-top border-secondary">
          <p>
            &copy; 2023 Agricultural Supply Chain Optimization. All rights
            reserved.
          </p>
        </div>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    {% block scripts %}{% endblock %}
  </body>
</html>
